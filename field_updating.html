<html>

<head>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
  <div x-data="obj = getObject()">
    <div>
      <button x-on:click="obj.changeField()">
        Change Field
      </button>
      <p>
        <span>Your Secret is: </span>
        <span x-text="obj?.secret ?? '_______' "></span>
        <button x-on:click="console.log('clicked') || obj.addSecret()">
          Reveal Secret
        </button>
      </p>
      <p>
        <span>Obj = </span>
        <!-- how to print a JSON object while respecting white-space -->
        <!-- https://stackoverflow.com/questions/49587553/how-to-output-json-with-spaces-and-new-lines -->
        <span style="white-space: pre-wrap" x-text="JSON.stringify(obj,null,2)">Obj = </span>
      </p>

    </div>
    <script>
      const getObject = () => {
        return Alpine.reactive({
          foo: "foo-getObject",
          bar: "bar-getObject",
          changeField() {
            this.bar = "bar-CHANGED"
          },
          addSecret() {
            this.secret = "[this is my special secret]"
          }
        })
      }
    </script>
</body>

</html>
